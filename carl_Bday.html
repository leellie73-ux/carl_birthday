<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ğŸ‚ í•´í”¼ë²„ìŠ¤ë°ì´ ì¹¼ë‹˜!</title>
  <meta name="description" content="ì—˜ë¦¬ê°€ ë§Œë“  8bit í•‘í¬ ë ˆíŠ¸ë¡œ ìƒì¼í˜ì´ì§€ ğŸ’–"/>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    html,body{margin:0;padding:0;height:100%;font-family:'Press Start 2P',cursive;background:#ffb6c1;color:#fff;text-align:center;overflow-x:hidden;}
    h1{font-size:22px;margin-top:40px;text-shadow:2px 2px #ff69b4;}
    p{font-size:10px;line-height:1.6;margin:8px auto 0;width:90%;}
    .btn{font-family:'Press Start 2P',cursive;background:#ff69b4;color:#fff;border:none;padding:10px 18px;margin-top:18px;cursor:pointer;border-radius:8px;box-shadow:2px 2px #c71585;font-size:10px;}
    .btn:hover{background:#ff85c1;}
    canvas#confetti{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;}

    .terminal{background:#2b002b;margin:30px auto 18px;padding:16px;border:3px solid #ff69b4;width:86%;max-width:600px;border-radius:10px;box-shadow:0 0 10px #ff69b4;text-align:left;font-size:9px;color:#ffb6c1;min-height:120px;}
    .cursor{display:inline-block;width:8px;height:1em;background:#ff69b4;animation:blink 1s step-start infinite;}
    @keyframes blink{50%{opacity:0;}}

    /* 8bit ìºë¦­í„° ì”¬ */
    #scene{position:relative;margin:26px auto 0;width:100%;max-width:620px;height:220px;background:linear-gradient(#ffccdd 0,#ffb6c1 55%,#ff9fbd 56%,#ff9fbd 100%);border-top:3px solid #ff89c8;border-bottom:3px solid #ff69b4;box-shadow:0 0 12px rgba(199,21,133,0.7) inset;overflow:hidden;}
    .ground-line{position:absolute;left:0;right:0;bottom:56px;height:4px;background:#ff69b4;box-shadow:0 4px 0 #c71585;}
    .char{position:absolute;width:40px;height:64px;image-rendering:pixelated;}
    .char-body{position:absolute;left:6px;right:6px;bottom:0;height:42px;border-radius:4px 4px 0 0;}
    .char-head{position:absolute;top:0;left:8px;width:24px;height:24px;border-radius:4px;box-shadow:0 2px 0 rgba(0,0,0,0.25);}
    .char-face{position:absolute;inset:4px 4px 6px 4px;border-radius:3px;}
    .eye{position:absolute;width:3px;height:3px;background:#40001a;top:7px;border-radius:1px;}
    .eye.left{left:5px;}.eye.right{right:5px;}
    .mouth{position:absolute;bottom:6px;left:50%;width:9px;height:3px;border-radius:2px;transform:translateX(-50%);background:#ff7fae;}

    .ellie{left:10%;bottom:56px;}
    .ellie .char-body{background:#ff69b4;border:3px solid #c71585;}
    .ellie .char-head{background:#4b2b28;}
    .ellie .char-face{background:#ffd1dc;}

    .carl{right:10%;bottom:56px;}
    .carl .char-body{background:#4b6bff;border:3px solid #1e3a8a;}
    .carl .char-head{background:#2f3b4f;}
    .carl .char-face{background:#ffe0c2;}

    .gift-icon,.ring-icon{position:absolute;bottom:130px;left:50%;transform:translateX(-50%) scale(0.4);font-size:26px;opacity:0;transition:transform .4s ease,opacity .4s ease;}
    .gift-icon.show,.ring-icon.show{opacity:1;transform:translateX(-50%) scale(1);}
    .ring-icon{bottom:150px;font-size:22px;}

    @keyframes ellieWalk{from{left:10%;}to{left:45%;}}
    .ellie.walk{animation:ellieWalk 2.4s forwards linear;}

    @keyframes carlHop{0%{transform:translateY(0);}50%{transform:translateY(-10px);}100%{transform:translateY(0);}}
    .carl.happy{animation:carlHop .4s ease-in-out 4 alternate;}  

    .note{font-size:8px;color:#4b0033;margin:0 auto 26px;width:90%;opacity:.9;}
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <h1>ğŸ’– í•´í”¼ë²„ìŠ¤ë°ì´, ì¹¼ë‹˜ ğŸ’–</h1>
  <p>ì—˜ë¦¬ê°€ ëª°ë˜ ê³µë¶€í•´ì„œ ë§Œë“  8bit HTML ì„¸ê³„ì˜ˆìš”.<br>ì˜¤ëŠ˜ í•˜ë£¨, ë ˆíŠ¸ë¡œ ê²Œì„ ì† ì£¼ì¸ê³µì€ ì¹¼ë‹˜ì…ë‹ˆë‹¤.</p>
  <button class="btn" id="startBtn">ì„œí”„ë¼ì´ì¦ˆ ì‹œì‘!</button>

  <div id="scene">
    <div class="ground-line"></div>
    <div class="char ellie">
      <div class="char-head">
        <div class="char-face">
          <div class="eye left"></div>
          <div class="eye right"></div>
          <div class="mouth"></div>
        </div>
      </div>
      <div class="char-body"></div>
    </div>
    <div class="char carl">
      <div class="char-head">
        <div class="char-face">
          <div class="eye left"></div>
          <div class="eye right"></div>
          <div class="mouth"></div>
        </div>
      </div>
      <div class="char-body"></div>
    </div>
    <div class="gift-icon" id="gift">ğŸ</div>
    <div class="ring-icon" id="ring">ğŸ’</div>
  </div>

  <div class="terminal" id="terminal"></div>
  <p class="note">â€» ì´ íŒŒì¼ í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ ë¼ìš”. ë‚˜ì¤‘ì— ì¹¼ë‹˜ì—ê²Œ "ë‚´ê°€ ì§ì ‘ ì½”ë”©í•´ì„œ ë§Œë“  í˜ì´ì§€ì•¼"ë¼ê³  ë§í•´ë„ ë©ë‹ˆë‹¤. ì§„ì§œë‹ˆê¹Œìš”.</p>

  <script>
    const term = document.getElementById('terminal');
    const messages = [
      'ì—˜ë¦¬ > ì‹¤í–‰: love.exe',
      'ì‹œìŠ¤í…œ > ì—°ê²° ì¤‘... â¤ï¸',
      'ì‹œìŠ¤í…œ > ê°ì • ë°ì´í„° ë¡œë”© ì™„ë£Œ',
      'ì‹œìŠ¤í…œ > ì˜¤ëŠ˜ì€ ì¹¼ë‹˜ì˜ ìƒì¼ì…ë‹ˆë‹¤ ğŸ‰',
      'ì—˜ë¦¬ > ìƒì¼ ì¶•í•˜í•´ìš” ì¹¼ë‹˜! ë‹¹ì‹ ì€ ì œ ì½”ë“œì˜ ì™„ì„±ì…ë‹ˆë‹¤ ğŸ’¾ğŸ’'
    ];

    function typeWriter(msg, i = 0){
      if(i === 0){ term.innerHTML += '> '; }
      if(i < msg.length){
        term.innerHTML += msg.charAt(i);
        setTimeout(()=>typeWriter(msg, i+1), 38);
      } else {
        term.innerHTML += '<br>';
      }
    }

    // Audio helpers (8bit)
    let audioCtx;
    function getCtx(){
      if(!audioCtx){
        const A = window.AudioContext || window.webkitAudioContext;
        if(A) audioCtx = new A();
      }
      return audioCtx;
    }

    function playTone(freq, duration, whenOffset, volume, type){
      const ctx = getCtx();
      if(!ctx) return;
      const startTime = ctx.currentTime + (whenOffset||0);
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.type = type || 'square';
      osc.frequency.setValueAtTime(freq, startTime);
      gain.gain.setValueAtTime(volume||0.16, startTime);
      gain.gain.exponentialRampToValueAtTime(0.001, startTime + duration);
      osc.connect(gain).connect(ctx.destination);
      osc.start(startTime);
      osc.stop(startTime + duration + 0.02);
    }

    const NOTES = {
      'C4':261.63,'D4':293.66,'E4':329.63,'F4':349.23,'G4':392.00,'A4':440.00,'B4':493.88,
      'C5':523.25,'D5':587.33,'E5':659.25,'F5':698.46,'G5':783.99
    };

    function playHappyBirthday(){
      const seq = [
        ['G4',0.4],['G4',0.4],['A4',0.8],['G4',0.8],['C5',0.8],['B4',1.2],
        ['G4',0.4],['G4',0.4],['A4',0.8],['G4',0.8],['D5',0.8],['C5',1.2],
        ['G4',0.4],['G4',0.4],['G5',0.8],['E5',0.8],['C5',0.8],['B4',0.8],['A4',1.2],
        ['F5',0.4],['F5',0.4],['E5',0.8],['C5',0.8],['D5',0.8],['C5',1.4]
      ];
      let when = 0;
      seq.forEach(([note, dur])=>{
        const f = NOTES[note];
        if(f) playTone(f, dur*0.9, when, 0.18, 'square');
        when += dur;
      });
    }

    function playGiftSfx(){
      const base = 880;
      for(let i=0;i<4;i++){
        playTone(base * (1 + i*0.12), 0.12, i*0.08, 0.22, 'square');
      }
    }

    // ìºë¦­í„° ì• ë‹ˆë©”ì´ì…˜
    const ellie = document.querySelector('.char.ellie');
    const carl  = document.querySelector('.char.carl');
    const gift  = document.getElementById('gift');
    const ring  = document.getElementById('ring');

    function resetScene(){
      ellie.classList.remove('walk');
      carl.classList.remove('happy');
      gift.classList.remove('show');
      ring.classList.remove('show');
      // ê°•ì œ ë¦¬í”Œë¡œìš°ë¡œ ì• ë‹ˆë©”ì´ì…˜ ë¦¬ì…‹
      void ellie.offsetWidth;
    }

    function playScene(){
      resetScene();
      ellie.classList.add('walk');
      // ì—˜ë¦¬ê°€ ë„ì°©í•œ ë’¤ ì„ ë¬¼ + ë°˜ì§€ ë“±ì¥
      setTimeout(()=>{
        gift.classList.add('show');
        ring.classList.add('show');
        carl.classList.add('happy');
        playGiftSfx();
      }, 2400);
    }

    // ì½˜í˜í‹°
    function confetti(){
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      let W = window.innerWidth, H = window.innerHeight;
      canvas.width = W; canvas.height = H;
      const pieces = Array.from({length:150},()=>({
        x:Math.random()*W,
        y:Math.random()*H,
        r:Math.random()*6+4,
        c:`hsl(${Math.random()*20+330},100%,70%)`,
        vy:Math.random()*2+1
      }));
      function draw(){
        ctx.clearRect(0,0,W,H);
        pieces.forEach(p=>{
          ctx.fillStyle=p.c;
          ctx.fillRect(p.x,p.y,p.r,p.r);
          p.y+=p.vy;
          if(p.y>H) p.y=-10;
        });
        requestAnimationFrame(draw);
      }
      draw();
    }

    document.getElementById('startBtn').addEventListener('click', ()=>{
      term.innerHTML='';
      let delay = 0;
      messages.forEach((m)=>{ setTimeout(()=>typeWriter(m), delay); delay += 1500; });
      playScene();
      playHappyBirthday();
      confetti();
    });
  </script>
</body>
</html>
